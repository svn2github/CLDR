<project name="CLDR" default="util" basedir=".">
    <target name="init">
        <tstamp/>
        <property name="src.dir" value="."/>
        <property name="build.dir" value="classes"/>
        <property name="jar.file" value="cldr.jar"/>
        <property name="jarSrc.file" value="cldrsrc.jar"/>
        <property environment="env"/>
        <property name="icu4j.binaries" value="${env.ICU4J_CLASSES}"/>

        <path id="build.classpath">
            <pathelement path="${build.dir}"/>
        </path>
        
        <condition property="is.icu4j.classes.set" >
            <isset property="env.ICU4J_CLASSES" />
        </condition > 
        <fail unless="is.icu4j.classes.set" message="Please set the ICU4J_CLASSES environment variable."/>
        
        <mkdir dir="${build.dir}"/>
        <echo message="java home: ${java.home}"/>
        <echo message="java version: ${java.version}"/>
        <echo message="ant java version: ${ant.java.version}"/>
        <echo message="${ant.version}"/>
        <echo message="ICU4J_CLASSES is set to = ${icu4j.binaries}"/>
                
    </target>

    <!-- build everything but dist-related stuff -->
    <target name="all" depends="util,tool,posix,icu,test" description="build all primary targets"/>

    <!-- core does not build richedit or tests -->
    <target name="util" depends="init" description="build utility classes">
        <javac includes="org/unicode/cldr/util/**/*.java"
            excludes="**/CVS/**/*"
            srcdir="${src.dir}"
            destdir="${build.dir}"
            classpathref="build.classpath"
            classpath="${icu4j.binaries}"
            source="1.4"
            debug="on" deprecation="off"
            encoding="ascii"/>
    </target>
    <target name="tool" depends="init,util" description="build tool classes">
        <javac includes="org/unicode/cldr/tool/**/*.java"
            excludes="**/CVS/**/*"
            srcdir="${src.dir}"
            destdir="${build.dir}"
            classpathref="build.classpath"
            classpath="${icu4j.binaries}"
            source="1.4"
            debug="on" deprecation="off"
            encoding="ascii"/>
    </target>
    <target name="posix" depends="init,util" description="build posix conversion tool">
        <javac includes="org/unicode/cldr/posix/**/*.java"
            excludes="**/CVS/**/*"
            srcdir="${src.dir}"
            destdir="${build.dir}"
            classpathref="build.classpath"
            classpath="${icu4j.binaries}"
            source="1.4"
            debug="on" deprecation="off"
            encoding="ascii"/>
    </target>
	<target name="icu" depends="init,util" description="build posix conversion tool">
	        <javac includes="org/unicode/cldr/icu/**/*.java"
	            excludes="**/CVS/**/*"
	            srcdir="${src.dir}"
	            destdir="${build.dir}"
	            classpathref="build.classpath"
	            classpath="${icu4j.binaries}"
	            source="1.4"
	            debug="on" deprecation="off"
	            encoding="ascii"/>
	</target>
    <target name="test" depends="init,util,tool" description="build tests">
        <javac includes="org/unicode/cldr/test/**/*.java"
            excludes="**/CVS/**/*"
            srcdir="${src.dir}"
            destdir="${build.dir}"
            classpathref="build.classpath"
            classpath="${icu4j.binaries}"
            source="1.4"
            debug="on" deprecation="off"
            encoding="ascii"/>
    </target>
        <target name="clean" depends="init" description="remove all build targets">
        <delete dir="${build.dir}"/>
        <delete file="${jar.file}"/>
    </target>
    
    <target name="jar" depends="all" description="build full 'cldr.jar' jar file">
        <jar jarfile="${jar.file}"
            compress="true"
            includes="org/unicode/cldr/util/**/*,org/unicode/cldr/tool/**/*,org/unicode/cldr/test/**/*,org/unicode/cldr/posix/**/*"
            basedir="${build.dir}"/>
    </target>

</project>
