<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE supplementalData SYSTEM "../../common/dtd/ldmlSupplemental.dtd">
<!--
Copyright © 1991-2013 Unicode, Inc.
CLDR data files are interpreted according to the LDML specification (http://unicode.org/reports/tr35/)
For terms of use, see http://www.unicode.org/copyright.html
-->
<supplementalData>
	<version number="$Revision$"/>
	<transforms>
		<transform source="Latin" target="NumericPinyin" direction="both">
			<tRule>
# According to the pinyin definitions I've been able to find:
# 'a', 'e' are the preferred bases
# otherwise 'o'
# otherwise last vowel
# The trailing form of syllables are the following:
#         &quot;a&quot;, &quot;ai&quot;, &quot;ao&quot;, &quot;an&quot;, &quot;ang&quot;,
#         &quot;o&quot;, &quot;ou&quot;, &quot;ong&quot;,
#         &quot;e&quot;, &quot;ei&quot;, &quot;er&quot;, &quot;en&quot;, &quot;eng&quot;,
#         &quot;i&quot;, &quot;ia&quot;, &quot;iao&quot;, &quot;ie&quot;, &quot;iu&quot;, &quot;ian&quot;, &quot;in&quot;, &quot;iang&quot;, &quot;ing&quot;, &quot;iong&quot;,
#         &quot;u&quot;, &quot;ua&quot;, &quot;uo&quot;, &quot;uai&quot;, &quot;ui&quot;, &quot;uan&quot;, &quot;un&quot;, &quot;uang&quot;, &quot;ueng&quot;,
#         &quot;ü&quot;, &quot;üe&quot;, &quot;üan&quot;, &quot;ün&quot;
# so the letters the tone will 'hop' are:
::NFD (NFC);
$tone = [̄́̌̀̆] ;
# Move the tone to the end of a syllable, and convert to number
e {($tone) r} → r &amp;Pinyin-NumericPinyin($1);
($tone) ( [i o n u {o n} {n g}]) → $2 &amp;Pinyin-NumericPinyin($1);
($tone) → &amp;Pinyin-NumericPinyin($1);
# The following backs up until it finds the right vowel, then deposits the tone
$vowel = [aAeEiIoOuU {ü} {Ü} vV];
$consonant = [[a-z A-Z] - [$vowel]];
$digit = [1-5];
$1 &amp;NumericPinyin-Pinyin($3) $2 ← ([aAeE]) ($vowel* $consonant*) ($digit);
$1 &amp;NumericPinyin-Pinyin($3) $2 ← ([oO]) ([$vowel-[aeAE]]* $consonant*) ($digit);
$1 &amp;NumericPinyin-Pinyin($3) $2 ← ($vowel) ($consonant*) ($digit);
&amp;NumericPinyin-Pinyin($1) ← [:letter:] {($digit)};
::NFC (NFD);
			</tRule>
		</transform>
	</transforms>
</supplementalData>
